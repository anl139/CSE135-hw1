<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Echo Form Demo — JavaScript Enabled</title>
<style>
body { font-family: sans-serif; max-width: 800px; margin: 2em auto; padding: 1em; }
fieldset { margin-top: 1.5em; padding: 1em; }
label { display: block; margin-top: 0.75em; }
select, input, textarea, button { font: inherit; padding: 0.4em; margin-top: 0.25em; }
#responseContainer { margin-top: 1.5em; padding: 1em; border: 1px solid #ddd; background: #fafafa; white-space: pre-wrap; }
.muted { color: #666; font-size: 0.9rem; }
</style>
</head>
<body>

<h1>Echo Form Demo — JavaScript Enabled</h1>
<p class="muted">Submit data using GET, POST, PUT, or DELETE. JavaScript dynamically handles the request.</p>

<form id="echoForm">
    <fieldset>
        <legend>Send Echo Request</legend>

        <label>
            Language / Endpoint:
            <select id="language">
                <option value="cgi-bin/echo-php.php">PHP</option>
                <!-- Add other endpoints if desired -->
            </select>
        </label>

        <label>
            HTTP Method:
            <select id="method">
                <option value="GET">GET</option>
                <option value="POST" selected>POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
            </select>
        </label>

        <label>
            Encoding:
            <select id="encoding">
                <option value="application/x-www-form-urlencoded" selected>x-www-form-urlencoded</option>
                <option value="application/json">application/json</option>
            </select>
        </label>

        <label>
            Name:
            <input type="text" id="name" value="Alice">
        </label>

        <label>
            Message:
            <textarea id="message" rows="3">Hello Echo</textarea>
        </label>

        <button type="submit">Send Request</button>
    </fieldset>
</form>

<div id="responseContainer">Response will appear here.</div>

<script>
(function() {
    const form = document.getElementById('echoForm');
    const response = document.getElementById('responseContainer');

    form.addEventListener('submit', async function(e) {
        e.preventDefault();

        const endpoint = document.getElementById('language').value;
        const method   = document.getElementById('method').value;
        const encoding = document.getElementById('encoding').value;

        const data = {
            name: document.getElementById('name').value,
            message: document.getElementById('message').value
        };

        let url = endpoint;
        let options = { method, headers: { 'Accept': 'application/json' } };

        if (method === 'GET') {
            // Attach query params
            url += '?' + new URLSearchParams(data);
        } else {
            if (encoding === 'application/json') {
                options.headers['Content-Type'] = 'application/json';
                options.body = JSON.stringify(data);
            } else {
                options.headers['Content-Type'] = 'application/x-www-form-urlencoded';
                options.body = new URLSearchParams(data);
            }
        }

        response.textContent = 'Sending request...';

        try {
            const res = await fetch(url, options);
            const text = await res.text();
            response.innerHTML = text;
        } catch (err) {
            response.textContent = 'Request failed: ' + err;
        }
    });
})();
</script>

</body>
</html>


